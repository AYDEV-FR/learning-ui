apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "learning-ui.fullname" . }}-scenario
  labels:
    {{- include "learning-ui.labels" . | nindent 4 }}
data:
  scenario.yaml: |
    name: {{ .Values.scenario.name | quote }}
    description: {{ .Values.scenario.description | quote }}
    difficulty: {{ .Values.scenario.difficulty | quote }}
    estimatedTime: {{ .Values.scenario.estimatedTime | quote }}
  tabs.yaml: |
    terminal:
      enabled: {{ .Values.terminal.enabled }}
    {{- if .Values.customTabs }}
    customTabs:
      {{- toYaml .Values.customTabs | nindent 6 }}
    {{- else }}
    customTabs: []
    {{- end }}
  {{- range $index, $step := .Values.scenario.steps }}
  {{ $step.name }}-content.md: |
{{ $step.content | indent 4 }}
  {{- if $step.check }}
  {{ $step.name }}-check.sh: |
{{ $step.check | indent 4 }}
  {{- end }}
  {{- end }}
