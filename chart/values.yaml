# Learning UI Chart Values
# This chart provides a KillerKoda-style interactive learning environment

# Values injected by dploy API
username: ""
uuid: ""
ingressHost: ""

# Scenario configuration
scenario:
  name: "Linux Shell Basics"
  description: "Learn essential Linux command line skills"
  difficulty: beginner
  estimatedTime: 30m
  steps:
    - name: "01-introduction"
      title: "Introduction"
      content: |
        # Welcome to Linux Shell Basics

        The command line is a powerful tool for interacting with your computer. In this tutorial, you'll learn essential commands for navigating and managing files.

        ## What You'll Learn

        1. Navigate the filesystem
        2. Create and manage files and directories
        3. View and manipulate file contents
        4. Use pipes and redirection
        5. Search for files and text

        Let's start by checking where we are:

        ```bash
        pwd
        ```

        This shows your **P**resent **W**orking **D**irectory.

    - name: "02-navigation"
      title: "Navigation"
      content: |
        # Navigating the Filesystem

        ## Listing Files

        Use `ls` to list files in the current directory:

        ```bash
        ls
        ```

        Add flags for more details:

        ```bash
        ls -la
        ```

        - `-l` shows detailed (long) format
        - `-a` shows hidden files (starting with `.`)

        ## Changing Directories

        Use `cd` to change directory:

        ```bash
        cd /tmp
        pwd
        ```

        Go back to your workspace:

        ```bash
        cd /workspace
        pwd
        ```

        Special shortcuts:
        - `cd ~` or `cd` - Go to home directory
        - `cd ..` - Go up one level
        - `cd -` - Go to previous directory

      check: |
        #!/bin/bash
        if [ "$(pwd)" = "/workspace" ]; then
            echo "You're in the workspace directory!"
            exit 0
        else
            echo "Navigate back to /workspace with: cd /workspace"
            exit 1
        fi

    - name: "03-files-directories"
      title: "Files & Directories"
      content: |
        # Creating Files and Directories

        ## Create a Directory

        Use `mkdir` to create directories:

        ```bash
        mkdir my-project
        ls
        ```

        Create nested directories with `-p`:

        ```bash
        mkdir -p my-project/src/utils
        ls -R my-project
        ```

        ## Create Files

        Use `touch` to create empty files:

        ```bash
        touch my-project/README.md
        ls my-project
        ```

        Or create a file with content using `echo`:

        ```bash
        echo "# My Project" > my-project/README.md
        ```

        ## View Directory Structure

        Use `tree` if available, or `ls -R`:

        ```bash
        ls -R my-project
        ```

      check: |
        #!/bin/bash
        if [ -d "/workspace/my-project" ] && [ -f "/workspace/my-project/README.md" ]; then
            echo "Directory and file created successfully!"
            exit 0
        else
            echo "Create the directory and file: mkdir my-project && touch my-project/README.md"
            exit 1
        fi

    - name: "04-file-content"
      title: "File Content"
      content: |
        # Viewing and Editing Files

        ## View File Contents

        Use `cat` to display entire file:

        ```bash
        cat my-project/README.md
        ```

        For longer files, use `less` (press `q` to quit):

        ```bash
        less /etc/passwd
        ```

        View first/last lines with `head` and `tail`:

        ```bash
        head -5 /etc/passwd
        tail -5 /etc/passwd
        ```

        ## Writing to Files

        Overwrite a file with `>`:

        ```bash
        echo "# My Awesome Project" > my-project/README.md
        echo "This is a demo project." >> my-project/README.md
        ```

        Append to a file with `>>`:

        ```bash
        echo "" >> my-project/README.md
        echo "## Features" >> my-project/README.md
        echo "- Feature 1" >> my-project/README.md
        echo "- Feature 2" >> my-project/README.md
        ```

        View the result:

        ```bash
        cat my-project/README.md
        ```

      check: |
        #!/bin/bash
        if grep -q "Features" /workspace/my-project/README.md 2>/dev/null; then
            echo "README.md has been updated with features!"
            exit 0
        else
            echo "Add Features section to README.md"
            exit 1
        fi

    - name: "05-copy-move-delete"
      title: "Copy, Move & Delete"
      content: |
        # Managing Files

        ## Copy Files and Directories

        Copy a file:

        ```bash
        cp my-project/README.md my-project/README.backup
        ls my-project
        ```

        Copy a directory (use `-r` for recursive):

        ```bash
        cp -r my-project my-project-backup
        ls
        ```

        ## Move and Rename

        Move or rename with `mv`:

        ```bash
        mv my-project/README.backup my-project/README.old
        ls my-project
        ```

        ## Delete Files and Directories

        Remove a file:

        ```bash
        rm my-project/README.old
        ls my-project
        ```

        Remove a directory (use `-r` for recursive):

        ```bash
        rm -r my-project-backup
        ls
        ```

        > âš ï¸ **Warning**: `rm` is permanent! There's no trash can.

      check: |
        #!/bin/bash
        if [ ! -d "/workspace/my-project-backup" ] && [ -d "/workspace/my-project" ]; then
            echo "Backup removed, project intact!"
            exit 0
        else
            echo "Remove the backup: rm -r my-project-backup"
            exit 1
        fi

    - name: "06-pipes-redirection"
      title: "Pipes & Redirection"
      content: |
        # Pipes and Redirection

        ## Pipes

        Pipes (`|`) send output from one command to another:

        ```bash
        ls -la /etc | head -10
        ```

        Chain multiple commands:

        ```bash
        cat /etc/passwd | grep "root" | cut -d: -f1
        ```

        ## Counting

        Count lines, words, and characters with `wc`:

        ```bash
        cat /etc/passwd | wc -l
        ```

        ## Sorting and Uniqueness

        Sort output:

        ```bash
        ls /etc | sort | head -10
        ```

        Get unique values:

        ```bash
        echo -e "apple\nbanana\napple\norange" | sort | uniq
        ```

        ## Save Output to File

        ```bash
        ls /etc | sort > /workspace/etc-files.txt
        head /workspace/etc-files.txt
        ```

      check: |
        #!/bin/bash
        if [ -f "/workspace/etc-files.txt" ]; then
            echo "Output saved to file successfully!"
            exit 0
        else
            echo "Save sorted /etc listing: ls /etc | sort > /workspace/etc-files.txt"
            exit 1
        fi

    - name: "07-searching"
      title: "Searching"
      content: |
        # Finding Files and Text

        ## Search File Contents with grep

        Search for a pattern in a file:

        ```bash
        grep "root" /etc/passwd
        ```

        Search recursively in directories:

        ```bash
        grep -r "Feature" my-project/
        ```

        Case-insensitive search:

        ```bash
        grep -i "readme" my-project/
        ```

        ## Find Files

        Find files by name:

        ```bash
        find /workspace -name "*.md"
        ```

        Find files by type:

        ```bash
        find /workspace -type f -name "*.txt"
        ```

        Find and execute a command:

        ```bash
        find /workspace -name "*.md" -exec cat {} \;
        ```

        ## Which and Type

        Find where a command is located:

        ```bash
        which ls
        type cd
        ```

      check: |
        #!/bin/bash
        echo "Great job learning to search!"
        exit 0

    - name: "08-permissions"
      title: "Permissions"
      content: |
        # File Permissions

        ## Understanding Permissions

        View permissions with `ls -l`:

        ```bash
        ls -l my-project/
        ```

        Permissions format: `rwxrwxrwx`
        - First 3: Owner (user)
        - Middle 3: Group
        - Last 3: Others

        Where: `r`=read, `w`=write, `x`=execute

        ## Changing Permissions

        Use `chmod` to change permissions:

        ```bash
        # Make a script executable
        echo '#!/bin/bash' > my-project/hello.sh
        echo 'echo "Hello World!"' >> my-project/hello.sh
        chmod +x my-project/hello.sh
        ls -l my-project/hello.sh
        ```

        Run the script:

        ```bash
        ./my-project/hello.sh
        ```

        Numeric permissions (e.g., 755 = rwxr-xr-x):

        ```bash
        chmod 644 my-project/README.md
        ls -l my-project/README.md
        ```

      check: |
        #!/bin/bash
        if [ -x "/workspace/my-project/hello.sh" ]; then
            echo "Script is executable!"
            exit 0
        else
            echo "Make the script executable: chmod +x my-project/hello.sh"
            exit 1
        fi

    - name: "09-environment"
      title: "Environment"
      content: |
        # Environment Variables

        ## View Environment Variables

        See all environment variables:

        ```bash
        env | head -20
        ```

        View a specific variable:

        ```bash
        echo $HOME
        echo $PATH
        echo $USER
        ```

        ## Set Variables

        Set a variable for current session:

        ```bash
        MY_VAR="Hello World"
        echo $MY_VAR
        ```

        Export for child processes:

        ```bash
        export MY_NAME="Linux Learner"
        echo $MY_NAME
        ```

        ## Using Variables in Commands

        ```bash
        BACKUP_DIR="/workspace/backups"
        mkdir -p $BACKUP_DIR
        cp my-project/README.md $BACKUP_DIR/
        ls $BACKUP_DIR
        ```

      check: |
        #!/bin/bash
        if [ -f "/workspace/backups/README.md" ]; then
            echo "Backup created using variables!"
            exit 0
        else
            echo "Create backup directory and copy file there"
            exit 1
        fi

    - name: "10-summary"
      title: "Summary"
      content: |
        # Congratulations! ðŸŽ‰

        You've learned the Linux shell basics:

        ## Commands Covered

        | Category | Commands |
        |----------|----------|
        | Navigation | `pwd`, `ls`, `cd` |
        | Files | `touch`, `mkdir`, `cp`, `mv`, `rm` |
        | Viewing | `cat`, `head`, `tail`, `less` |
        | Pipes | `\|`, `>`, `>>`, `wc`, `sort`, `uniq` |
        | Search | `grep`, `find`, `which` |
        | Permissions | `chmod`, `ls -l` |
        | Environment | `env`, `echo`, `export` |

        ## Cleanup (Optional)

        ```bash
        rm -rf my-project backups etc-files.txt
        ls
        ```

        ## Next Steps

        - Learn about `vim` or `nano` for text editing
        - Explore shell scripting with bash
        - Try the Git Basics tutorial
        - Practice with Kubernetes commands

        **Keep practicing!** The more you use the command line, the more natural it becomes.

      check: |
        #!/bin/bash
        echo "Congratulations on completing Linux Shell Basics!"
        echo "You're now ready to explore more advanced topics!"
        exit 0

# Shell container configuration
shell:
  image:
    repository: ghcr.io/aydev-fr/learning-shell
    tag: latest
    pullPolicy: IfNotPresent

  command: ["sleep"]
  args: ["infinity"]

  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "500m"

  securityContext:
    capabilities:
      drop:
        - ALL
      add:
        - SETGID
        - SETUID
    allowPrivilegeEscalation: false

# Learning UI configuration
ui:
  image:
    repository: ghcr.io/aydev-fr/learning-ui
    tag: latest
    pullPolicy: IfNotPresent

  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "500m"

  securityContext:
    capabilities:
      drop:
        - ALL
    allowPrivilegeEscalation: false
    runAsNonRoot: true
    runAsUser: 1000
    readOnlyRootFilesystem: true

# Pod security context
podSecurityContext:
  fsGroup: 1000
  seccompProfile:
    type: RuntimeDefault

# Service configuration
service:
  type: ClusterIP
  port: 8080

# Ingress configuration
ingress:
  enabled: true
  className: ""
  annotations: {}
  tls: []

# Persistence for shell workspace
persistence:
  enabled: true
  storageClass: ""
  accessModes:
    - ReadWriteOnce
  size: "1Gi"
  mountPath: "/workspace"

# RBAC configuration
rbac:
  create: true

# Service account
serviceAccount:
  create: true
  automount: false
  annotations: {}
  name: ""

# Network policy
networkPolicy:
  enabled: false

# Editor tab (code-server)
editor:
  enabled: false
  image:
    repository: codercom/code-server
    tag: latest
    pullPolicy: IfNotPresent
  password: ""
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "1000m"

# Embedded Kubernetes (k3s)
k3s:
  enabled: false
  image:
    repository: rancher/k3s
    tag: latest
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "512Mi"
      cpu: "200m"
    limits:
      memory: "2Gi"
      cpu: "2000m"

# Terminal tab configuration
terminal:
  enabled: true

# Custom tabs
customTabs: []
